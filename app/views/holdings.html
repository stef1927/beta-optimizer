<div class="container">
  <div class="row-fluid">

    <div class="col-md-8">
      <h2>Holdings</h2>

      <div ng-repeat="platform in platforms">
        <div ng-repeat="currency in platformCurrencies(platform)">
          <h3>{{platform.name + ' (' + currency + ')'}}</h3>

        	<table class="text-right table table-striped table-hover table-bordered">
            <tr>
              <th class="text-right">Product</th>
              <th class="text-right">Market Value</th>
              <th class="text-right">Num transactions</th>
              <th class="text-right">Average</th>
              <th class="text-right">Net</th>
            </tr>
                    
            <tr ng-repeat="product in products | with_platform_currency:platform:currency">
              <td>{{product.code}}</td>
              <td>{{product.market_value | currency:currency}}</td>
              <td>{{productTransactions(product).length}}</td>
              <td>{{productAverage(product) | currency:currency}}</td>
              <td>{{productNet(product) | currency:currency}}</td>
            </tr>

            <tr>
              <th class="text-right">Total</th>
              <th class="text-right">-</th>
              <th class="text-right">{{platformTransactions(platform, currency).length}}</th>
              <th class="text-right">{{platformAverage(platform, currency) | currency:currency}}</th>
              <th class="text-right">{{platformNet(platform, currency) | currency:currency}}</th>
            </tr>
          </table> 
        </div>
      </div>

    </div>

  </div>
</div>